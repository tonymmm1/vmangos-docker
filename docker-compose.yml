version: "3.2"
services:
  vmangos_database:
    build:
      context: .
      dockerfile: docker/database/Dockerfile
    ports:
      - 3306:3306
    restart: unless-stopped
    volumes:
      - vmangos_database:/var/lib/mysql
    env_file:
      - db.env
      - server.env
      - mangos.env

  vmangos_realmd:
    build: 
      context: .
      dockerfile: docker/realmd/Dockerfile
    ports: 
      - 3724:3724
    depends_on:
      - vmangos_database
    links:
      - vmangos_database 
    restart: unless-stopped

  vmangos_mangos:
    tty: true
    stdin_open: true
    ports: 
      - 8085:8085
    build:
      context: .
      dockerfile: docker/mangos/Dockerfile
    volumes:
      - type: bind
        source: ./docker/mangos/mangos
        target: /opt/mangos
    depends_on:
      - vmangos_database
    links:
      - vmangos_database
    restart: unless-stopped
#Docker-compose volumes
volumes:
  vmangos_database:

